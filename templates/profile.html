{% extends 'base.html' %}
{% block content %}
 
    <a href="/homepage">
      <button type="button" class="btn btn-outline-primary">Home</button>
    </a>
    <!-- TODO: make account route -->
    <a href="/account"> 
      <button type="button" class="btn btn-outline-info">Account</button>
    </a>
    <!-- TODO: make info route -->
    <a href="/info">
      <button type="button" class="btn btn-outline-secondary">Info</button>
    </a>
    <a href="/logout">
      <button type="button" class="btn btn-outline-info">Logout</button>
    </a>



    <div id="profile" style="width: 18rem;">
      <img class="card-img-top" src="{{user_info.image_id}}" alt="Card image cap">
      <div class="card-body">
        <h4 class="user-name">{{user_info.fname}}</h4>
        <p>{{user_info.lname}}</p>
        <p>{{user_info.age}}</p>
        <p>{{user_info.city}}</p>
        <p>{{user_info.hobbie}}</p>

        <p>{{user_info.yourself}}</p>


        <p class="card-text">Search People, Connect, Talk and Meet at Caffe</p>
      </div>
    </div>
    
    <button
      id="like"
      data-liked-user-id='{{ user_info.user_id }}'
      type="button"
      class="btn btn-outline-info">Like</button>
    
    <button
      id="dislike"
      data-disliked-user-id='{{ user_info.user_id }}'
      type="button"
      class="btn btn-outline-info">Dislike</button>

  <script>
  "use strict";

  let likeButton = $('#like');
  let dislikeButton = $('#dislike');

  function logResult(data) {
    console.log(data);
  }

  function processLikedclick() {
    if (likeButton.hasClass('liked')) {
      // unlike
      likeButton.removeClass('liked');
      $.post('/unlike', likeButton.data(), logResult); // data looks like this... {likedUserId: 9}
    } else {
      // like
      likeButton.addClass("liked");
      $.post('/like', likeButton.data(), logResult);
      dislikeButton.removeClass("disliked");
    }
  }

  likeButton.on('click', processLikedclick);


  function processDislikedclick() { // data looks like this... {dislikedUserId: 9}
    if (dislikeButton.hasClass('disliked')){

      // undislike
      dislikeButton.removeClass('disliked');

      // ajax post request to server including id of user profile
      $.post('/undislike',dislikeButton.data(),logResult);

    } else{
      // dislike
      dislikeButton.addClass('disliked');
      $.post('/dislike',dislikeButton.data(),logResult);
      likeButton.removeClass("liked");
    }

  }

  dislikeButton.on('click', processDislikedclick);


  // TODO:
  // right away, make an get request to the server to determine if this user likes this person
  // update the like or dislike button to show this info
  // get reqst 
  </script>

{% endblock %}